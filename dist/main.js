!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(){}function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){e.appendChild(t)}function c(t,e,n){e.insertBefore(t,n)}function s(t){t.parentNode.removeChild(t)}function a(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return document.createComment("")}function d(t,e,n){t.addEventListener(e,n,!1)}function g(t,e,n){t.removeEventListener(e,n,!1)}function m(t,e,n){t.style.setProperty(e,n)}n.r(e);var h={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule(t,e){if(!this.stylesheet){const t=l("style");document.head.appendChild(t),h.stylesheet=t.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule(`@keyframes ${e} ${t}`,this.stylesheet.cssRules.length))},next(){this.running=!1;const t=window.performance.now();let e=this.transitions.length;for(;e--;){const n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){let t=this.stylesheet.cssRules.length;for(;t--;)this.stylesheet.deleteRule(t);this.activeRules={}}},deleteRule(t,e){t.style.animation=t.style.animation.split(", ").filter(t=>t&&-1===t.indexOf(e)).join(", ")},groupOutros(){this.outros={remaining:0,callbacks:[]}},wait:()=>(h.promise||(h.promise=Promise.resolve(),h.promise.then(()=>{h.promise=null})),h.promise)};function p(t,e){var n=e.token={};function o(t,o,i,c){if(e.token!==n)return;e.resolved=i&&{[i]:c};const s=r(r({},e.ctx),e.resolved),a=t&&(e.current=t)(e.component,s);e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==o&&t&&(h.groupOutros(),t.o(()=>{t.d(1),e.blocks[n]=null}))}):e.block.d(1),a.c(),a[a.i?"i":"m"](e.mount(),e.anchor),e.component.root.set({})),e.block=a,e.blocks&&(e.blocks[o]=a)}if(function(t){return t&&"function"==typeof t.then}(t)){if(t.then(t=>{o(e.then,1,e.value,t)},t=>{o(e.catch,2,e.error,t)}),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved={[e.value]:t}}}function b(t){this.destroy=o,this.fire("destroy"),this.set=o,this._fragment.d(!1!==t),this._fragment=null,this._state={}}function v(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function _(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1){var r=n[o];r.__calling||(r.__calling=!0,r.call(this,e),r.__calling=!1)}}function y(){return this._state}function x(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=e.store||t.root.store}function k(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function N(t){this._set(r({},t)),this.root._lock||(this.root._lock=!0,O(this.root._beforecreate),O(this.root._oncreate),O(this.root._aftercreate),this.root._lock=!1)}function j(t){var e=this._state,n={},o=!1;for(var i in t)this._differs(t[i],e[i])&&(n[i]=o=!0);o&&(this._state=r(r({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))}function O(t){for(;t&&t.length;)t.shift()()}function R(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)}var w={destroy:b,get:y,fire:_,on:k,set:N,_recompute:o,_set:j,_mount:R,_differs:v};var C={fetchState(){const{config:t}=this.get();return fetch("../instance/"+encodeURIComponent(t.Name),{method:"get"}).then(t=>t.json()).then(function(t){this.set({running:t.running})}).catch(function(e){console.error(t.Name,e)})},start(){const{running:t,config:e}=this.get();if(!t)return this.set({running:null}),fetch("../supervisor/"+encodeURIComponent(e.Name),{method:"post"}).then(function(t){if(200===t.status)return this.fetchState();console.warn(t.status,t.statusText)}).catch(function(t){console.error(e.Name,t)})},stop(){const{running:t,config:e}=this.get();if(t)return this.set({running:null}),fetch("../instance/"+encodeURIComponent(e.Name),{method:"post"}).then(function(t){if(204===t.status)return this.fetchState();console.warn(t.status,t.statusText)}).catch(function(t){console.error(e.Name,t)})}};function S(){clearTimeout(this.timeout)}function T(t,e){var n;return{c(){(n=l("div")).className="circle bg-grey blinking svelte-4bmco2"},m(t,e){c(n,t,e)},d(t){t&&s(n)}}}function E(t,e){var n;return{c(){(n=l("div")).className="circle bg-green svelte-4bmco2"},m(t,e){c(n,t,e)},d(t){t&&s(n)}}}function F(t,e){var n;return{c(){(n=l("div")).className="circle bg-red svelte-4bmco2"},m(t,e){c(n,t,e)},d(t){t&&s(n)}}}function P(t,e){var n;return{c(){(n=l("button")).textContent="checking...",n.className="nicebtn svelte-4bmco2",n.disabled=!0},m(t,e){c(n,t,e)},d(t){t&&s(n)}}}function I(t,e){var n;function o(e){t.stop()}return{c(){(n=l("button")).textContent="stop",d(n,"click",o),n.className="nicebtn svelte-4bmco2"},m(t,e){c(n,t,e)},d(t){t&&s(n),g(n,"click",o)}}}function L(t,e){var n;function o(e){t.start()}return{c(){(n=l("button")).textContent="start",d(n,"click",o),n.className="nicebtn svelte-4bmco2"},m(t,e){c(n,t,e)},d(t){t&&s(n),g(n,"click",o)}}}function A(t,e){var n,o,r,a=e.config.WorkDir;return{c(){n=l("div"),o=u(" at: "),r=u(a),m(n,"font-style","italic"),m(n,"font-family","monospace"),m(n,"color","gray"),m(n,"border-top","lightgray dotted 1px"),m(n,"padding-top","0.5em"),m(n,"padding-left","8px"),m(n,"padding-right","8px"),m(n,"margin-top","0.5em"),m(n,"margin-left","-8px"),m(n,"margin-right","-8px")},m(t,e){c(n,t,e),i(o,n),i(r,n)},p(t,e){t.config&&a!==(a=e.config.WorkDir)&&(r.data=a)},d(t){t&&s(n)}}}function D(t,e){var n,o,r,a,f,d=e.config.LogFile;return{c(){n=l("div"),o=u("log: "),r=l("a"),a=u(d),r.href=f="supervisor/"+e.config.Name+"/log",m(n,"font-style","italic"),m(n,"font-family","monospace"),m(n,"color","gray"),m(n,"border-top","lightgray dotted 1px"),m(n,"padding-top","0.5em"),m(n,"padding-left","8px"),m(n,"padding-right","8px"),m(n,"margin-top","0.5em"),m(n,"margin-left","-8px"),m(n,"margin-right","-8px")},m(t,e){c(n,t,e),i(o,n),i(r,n),i(a,r)},p(t,e){t.config&&d!==(d=e.config.LogFile)&&(a.data=d),t.config&&f!==(f="supervisor/"+e.config.Name+"/log")&&(r.href=f)},d(t){t&&s(n)}}}function M(t,e){var n,o,r,a,f,d,g=e.name,h=e.value;return{c(){n=l("tr"),o=l("th"),r=u(g),a=u("\n            "),f=l("td"),d=u(h),m(f,"word-break","break-all")},m(t,e){c(n,t,e),i(o,n),i(r,o),i(a,n),i(f,n),i(d,f)},p(t,e){(t.Object||t.config)&&g!==(g=e.name)&&(r.data=g),(t.Object||t.config)&&h!==(h=e.value)&&(d.data=h)},d(t){t&&s(n)}}}function U(t,e){for(var n,o=e.Object.entries(e.config.Environment),r=[],i=0;i<o.length;i+=1)r[i]=M(0,W(e,o,i));return{c(){n=l("table");for(var t=0;t<r.length;t+=1)r[t].c();n.className="env svelte-4bmco2"},m(t,e){c(n,t,e);for(var o=0;o<r.length;o+=1)r[o].m(n,null)},p(t,e){if(t.Object||t.config){o=e.Object.entries(e.config.Environment);for(var i=0;i<o.length;i+=1){const c=W(e,o,i);r[i]?r[i].p(t,c):(r[i]=M(0,c),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},d(t){t&&s(n),a(r,t)}}}function W(t,e,n){const o=Object.create(t);return o.name=e[n][0],o.value=e[n][1],o.each_value=e,o.each_index=n,o}function B(t){x(this,t),this._state=r(r({Object:Object},{running:null}),t.data),this._intro=!0,this._handlers.destroy=[S],document.getElementById("svelte-4bmco2-style")||function(){var t=l("style");t.id="svelte-4bmco2-style",t.textContent=".green.svelte-4bmco2{color:green}.orange.svelte-4bmco2{color:red}.blue.svelte-4bmco2{color:blue}.bg-green.svelte-4bmco2{background-color:limegreen}.bg-red.svelte-4bmco2{background-color:red}.bg-grey.svelte-4bmco2{background-color:lightgray}.circle.svelte-4bmco2{display:inline-block;width:2em;height:2em;border-radius:1em;margin:0.2em}.run.svelte-4bmco2{width:100%;padding:8px;border-radius:5px}.nicebtn.svelte-4bmco2{background:none;border-radius:3px;border:gray dashed 1px;margin:5px;font-size:18px}.nicebtn.svelte-4bmco2:hover{background:grey;color:white;border-color:white;font-size:18px}.mainblock.svelte-4bmco2{display:flex;flex-direction:row}.rborder.svelte-4bmco2{border-right:darkgray dashed 1px;padding-right:1em}.env.svelte-4bmco2{width:100%;text-align:left;font-family:monospace}.content.svelte-4bmco2{display:flex;flex-direction:column;box-shadow:darkgrey 0 0 3px;border-radius:5px;padding:8px;font-family:Roboto serif;border:lightgray 1px solid;margin:10px}.bottom-panel.svelte-4bmco2{background-color:lightgray;margin-left:-8px;margin-right:-8px;margin-bottom:-8px;padding:5px;font-family:monospace;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.blinking.svelte-4bmco2{animation:svelte-4bmco2-blinking 2s linear infinite}@keyframes svelte-4bmco2-blinking{50%{opacity:0}}",i(t,document.head)}(),t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,o,r,a,f,d,g,h,p,b,v,_,y,x,k,N,j,O,R,w,C,S,M,W,B,q,z,$,G,H,J,K,Q,V,X=e.config.Name,Y=e.config.Command,Z=e.config.Args.join(" "),tt=-1===e.config.Restart?"∞":e.config.Restart,et=(e.config.RestartTimeout/1e9).toFixed(2),nt=(e.config.StopTimeout/1e9).toFixed(2);function ot(t){return null===t.running?T:t.running?E:F}var rt=ot(e),it=rt(t,e);function ct(t){return null===t.running?P:t.running?I:L}var st=ct(e),at=st(t,e),lt=e.config.WorkDir&&A(0,e),ut=e.config.LogFile&&D(0,e),ft=e.config.Environment&&U(0,e);return{c(){n=l("div"),o=l("div"),it.c(),r=u("\n        "),a=l("h1"),f=u(X),d=u("\n    "),g=l("div"),at.c(),h=u("\n    "),p=l("div"),b=l("div"),v=l("pre"),(_=l("span")).textContent="cmd:",y=u(" "),x=u(Y),k=u(" "),N=u(Z),j=u("\n            "),lt&&lt.c(),O=u("\n            "),ut&&ut.c(),R=u("\n    "),ft&&ft.c(),w=u("\n\n    "),C=l("div"),S=l("span"),M=u("restart: "),W=u(tt),B=u("\n        "),q=l("span"),z=u("restart timeout: "),$=u(et),G=u("s"),H=u("\n        "),J=l("span"),K=u("stop timeout: "),Q=u(nt),V=u("s"),m(a,"margin","0"),m(o,"display","flex"),m(o,"flex-direction","row"),m(v,"margin","0"),b.className="run svelte-4bmco2",p.className="mainblock svelte-4bmco2",S.className="green rborder svelte-4bmco2",q.className="blue rborder svelte-4bmco2",J.className="orange svelte-4bmco2",C.className="bottom-panel svelte-4bmco2",n.className="content svelte-4bmco2"},m(t,e){c(n,t,e),i(o,n),it.m(o,null),i(r,o),i(a,o),i(f,a),i(d,n),i(g,n),at.m(g,null),i(h,n),i(p,n),i(b,p),i(v,b),i(_,v),i(y,v),i(x,v),i(k,v),i(N,v),i(j,b),lt&&lt.m(b,null),i(O,b),ut&&ut.m(b,null),i(R,n),ft&&ft.m(n,null),i(w,n),i(C,n),i(S,C),i(M,S),i(W,S),i(B,C),i(q,C),i(z,q),i($,q),i(G,q),i(H,C),i(J,C),i(K,J),i(Q,J),i(V,J)},p(e,i){rt!==(rt=ot(i))&&(it.d(1),(it=rt(t,i)).c(),it.m(o,r)),e.config&&X!==(X=i.config.Name)&&(f.data=X),st!==(st=ct(i))&&(at.d(1),(at=st(t,i)).c(),at.m(g,null)),e.config&&Y!==(Y=i.config.Command)&&(x.data=Y),e.config&&Z!==(Z=i.config.Args.join(" "))&&(N.data=Z),i.config.WorkDir?lt?lt.p(e,i):((lt=A(0,i)).c(),lt.m(b,O)):lt&&(lt.d(1),lt=null),i.config.LogFile?ut?ut.p(e,i):((ut=D(0,i)).c(),ut.m(b,null)):ut&&(ut.d(1),ut=null),i.config.Environment?ft?ft.p(e,i):((ft=U(0,i)).c(),ft.m(n,w)):ft&&(ft.d(1),ft=null),e.config&&tt!==(tt=-1===i.config.Restart?"∞":i.config.Restart)&&(W.data=tt),e.config&&et!==(et=(i.config.RestartTimeout/1e9).toFixed(2))&&($.data=et),e.config&&nt!==(nt=(i.config.StopTimeout/1e9).toFixed(2))&&(Q.data=nt)},d(t){t&&s(n),it.d(),at.d(),lt&&lt.d(),ut&&ut.d(),ft&&ft.d()}}}(this,this._state),this.root._oncreate.push(()=>{(function(t){let e=()=>{this.timeout=setTimeout(()=>{this.fetchState().finally(()=>{e()})},2e3)};this.fetchState().then(e)}).call(this),this.fire("update",{changed:function(t,e){for(var n in e)t[n]=1;return t}({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),O(this._oncreate))}r(B.prototype,w),r(B.prototype,C);var q=B;function z(t,e){var n;return{c(){(n=l("p")).textContent="loading..."},m(t,e){c(n,t,e)},p:o,d(t){t&&s(n)}}}function $(t,e){var n={config:e.config},o=new q({root:t.root,store:t.store,data:n});return{c(){o._fragment.c()},m(t,e){o._mount(t,e)},p(t,e){var n={};t.configs&&(n.config=e.config),o._set(n)},d(t){o.destroy(t)}}}function G(t,e){for(var n,o=e.configs,r=[],i=0;i<o.length;i+=1)r[i]=$(t,J(e,o,i));return{c(){for(var t=0;t<r.length;t+=1)r[t].c();n=f()},m(t,e){for(var o=0;o<r.length;o+=1)r[o].m(t,e);c(n,t,e)},p(e,i){if(e.configs){o=i.configs;for(var c=0;c<o.length;c+=1){const s=J(i,o,c);r[c]?r[c].p(e,s):(r[c]=$(t,s),r[c].c(),r[c].m(n.parentNode,n))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(t){a(r,t),t&&s(n)}}}function H(t,e){return{c:o,m:o,p:o,d:o}}function J(t,e,n){const o=Object.create(t);return o.config=e[n],o.each_value=e,o.config_index=n,o}function K(t){x(this,t),this._state=r({configs:fetch("../supervisors",{method:"get"}).then(t=>t.json()).then(t=>Promise.all(t.map(t=>fetch("../supervisor/"+encodeURIComponent(t),{method:"get"}).then(t=>t.json())))).catch(function(t){console.error(t)})},t.data),this._intro=!0,t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,o;let i={component:t,ctx:e,current:null,pending:z,then:G,catch:H,value:"configs",error:"null"};return p(o=e.configs,i),{c(){n=f(),i.block.c()},m(t,e){c(n,t,e),i.block.m(t,i.anchor=e),i.mount=(()=>n.parentNode)},p(t,n){e=n,i.ctx=e,"configs"in t&&o!==(o=e.configs)&&p(o,i)||i.block.p(t,r(r({},e),i.resolved))},d(t){t&&s(n),i.block.d(t),i=null}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,O(this._beforecreate),O(this._oncreate),O(this._aftercreate),this._lock=!1)}r(K.prototype,w);new K({target:document.getElementById("supervisors"),data:{}})}]);